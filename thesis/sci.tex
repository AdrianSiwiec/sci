\documentclass{article}

\usepackage{amssymb}
\usepackage[T1]{fontenc}
% \usepackage[utf8]{inputenc}
\usepackage[greek,polish,english]{babel}

% Set page size and margins
\usepackage[a4paper,top=1cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{csquotes}
% \usepackage{txfonts}
% \usepackage{pxfonts}
% \usepackage{newtxmath}
\usepackage{mathtools}
\usepackage{wasysym}
\usepackage{xspace}

\usepackage{amsthm}
\usepackage{amssymb,amsmath,amsthm}
\usepackage{cleveref}
\usepackage{textcomp}
\usepackage[multiple, perpage]{footmisc}
\usepackage{lipsum}
\usepackage{sidenotes}
\usepackage{tikz,tikz-3dplot}
\usepackage{subcaption}
\usepackage{graphicx}
\usepackage{amsthm}
\usepackage{framed}
\usepackage{amsmath}
\usepackage{xcolor, colortbl}
\usepackage{csquotes}
\usepackage[shortlabels]{enumitem}
\usepackage{booktabs}
\definecolor{c1}{HTML}{377eb8}
\definecolor{c2}{HTML}{ff7f00}
\definecolor{c3}{HTML}{4daf4a}
\definecolor{c4}{HTML}{d62728}
\usetikzlibrary{arrows}
\usetikzlibrary{patterns}
\usetikzlibrary{hobby}

\usetikzlibrary{backgrounds}
\tdplotsetmaincoords{80}{45}
\tdplotsetrotatedcoords{-90}{180}{-90}
\tikzset{surface/.style={draw=red!70!black, fill=red!40!white, fill opacity=.6}}

\renewcommand*{\thefootnote}{\alph{footnote}}
\interfootnotelinepenalty=1000000000

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\AfterEndEnvironment{theorem}{\noindent\ignorespaces}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\AfterEndEnvironment{definition}{\noindent\ignorespaces}

\theoremstyle{definition}
\newtheorem{example}{Example}[section]
\AfterEndEnvironment{example}{\noindent\ignorespaces}

\theoremstyle{definition}
\newtheorem{remark}{Remark}[section]
\AfterEndEnvironment{remark}{\noindent\ignorespaces}

\newcommand*{\Ts}{T^*}
\newcommand*{\id}{\equiv}
\newcommand*{\ra}{\rightarrow}

\newcommand*{\V}{\texttt{V}}
\newcommand*{\FOR}{\texttt{FOR}}
\newcommand*{\FORx}{\texttt{FOR}^X}
\newcommand*{\ID}{\texttt{ID}}
\newcommand*{\IDx}{\texttt{ID}^X}
\newcommand*{\SUB}{\texttt{SUB}}
\newcommand{\SCI}{$\mathsf{SCI}$\xspace}
\newcommand{\PC}{$\mathsf{PC}$\xspace}
\newcommand{\M}{\mathcal{M}\xspace}
\newcommand{\MP}{\mathsf{MP}}
\newcommand{\TSCI}{$\mathsf{T_{SCI}}$\xspace}
\newcommand{\DTSCI}{$\mathsf{DT_{SCI}}$\xspace}
\newcommand{\TsSCI}{$\mathsf{T^*_{SCI}}$\xspace}
\newcommand{\N}{\mathbb{N}}

\makeatletter
\newcommand{\leqnomode}{\tagsleft@true\let\veqno\@@leqno}
\newcommand{\reqnomode}{\tagsleft@false\let\veqno\@@eqno}
\makeatother

\title{Decision procedures for a non-Fregean logic \SCI}
\author{Adrian Siwiec}

\begin{document}
\date{\today}

\maketitle

Test: ążźćłóęń

\section{Sentential logic and the Fregean axiom}
\section{\SCI}
\subsection{Basic notions}

\begin{definition}[Vocabulary of \SCI]
    The vocabulary of \SCI consists of symbols from the following pairwise disjoint sets:
    \begin{itemize}
        \item $\V = \{p, q, r, ...\}$ -- a countable infinite set of propositional variables,
        \item $\{\lnot, \ra, \id \}$  -- the set consisting of the unary operator of negation ($\lnot$) and binary operators of implication ($\ra$) and identity ($\id$),
        \item $\{(,)\}$ -- the set of auxiliary symbols.
    \end{itemize}
\end{definition}
\begin{definition}[Formulas of \SCI]
    The set of formulas of \SCI is defined with the following grammar:
    $$
        \FOR \ni \varphi ::= p  \; | \;  \lnot \varphi \; | \; (\varphi \ra \varphi) \; | \; (\varphi \id \varphi)
    $$ where $p \in \V$ is a propositional variable.
\end{definition}
The propositional variables will also be called atomic formulas.

From now on whenever we write $p, q, r, ... $ we will mean the atomic formulas.
We will omit brackets when it will lead to no misunderstanding. We will write
$\varphi \not \id \psi$ as a shorthand for $\lnot(\varphi \id \psi)$.

The set of identities $\ID$ is a set of formulas $\varphi \id \psi$ where
$\varphi, \psi \in \FOR$. Formulas $\varphi \id \varphi$ are the trivial
identities.

\begin{definition}[Subformulas]
    For a formula $\varphi \in \FOR$ let us define the set of subformulas of $\varphi$ as:
    $$
        \SUB(\varphi) = \begin{cases}
            \{p\},                                            & \text{if } \varphi = p \in \V,                                                   \\
            \{\varphi\} \cup \SUB(\psi),                      & \text{if } \varphi = \lnot \psi,                                                 \\
            \{\varphi\} \cup \SUB(\psi) \cup \SUB(\vartheta), & \text{if } \varphi = \psi \ra \vartheta, \text{or } \varphi = \psi \id \vartheta \\
        \end{cases}
    $$
\end{definition}
By $\varphi(\psi / \vartheta)$ we will denote the formula $\varphi$ with all
occurrences of its subformula $\psi$ substituted with $\vartheta$.

\begin{definition}[Simple formulas]
    The formula $\varphi$ is called a simple formula if it has one of the following form:
    $$
        p,\ \lnot p,\ p \id q,\ p \not \id q,\ p \id \lnot q,\ p \id (q \ra r),\ p \id (q \id r)
    $$
    for $p, q, r \in \V$.
\end{definition}

\begin{definition}[Size of a formula]
    Given a formula $\varphi$, let us define its size $s(\varphi)$:
    $$
        s(\varphi) = \begin{cases}
            1,                          & \text{if } \varphi = p,                                                                      \\
            s(\psi) + 1,                & \text{if } \varphi = \lnot \psi,                                                             \\
            s(\psi) + s(\vartheta) + 1, & \text{if } \varphi = \psi \equiv \vartheta,\text{ or } \varphi = \psi \rightarrow \vartheta.
        \end{cases}
    $$
\end{definition}
$\V$ is a countable set. Let us take any full ordering of it and mark it as $<$. Let us then
extend it by saying that for each $p \in \V$: $p < \lnot <\xspace (\ < \ )\xspace<\ \ra\ <\ \id$. Now,
let us define an ordering of formulas $\prec$ by saying that if $s(\varphi) < s(\psi)$ then $\varphi \prec \psi$ and if $s(\varphi) = s(\psi)$ then $\varphi \prec \psi$ if it is earlier within the lexicographical ordering
with $<$.

If we consider formulas that contain only the negation and implication
operators, they form the classical Propositional Calculus. For simplicity, in
\SCI we'll consider every tautology of the classical Propositional Calculus to
be an axiom.

\begin{definition}[Axiomatization of \SCI]
    \label{axiomatization}
    \SCI is axiomatized with the following axioms:
    \begin{itemize}
        \item Any tautology of the classical Propositional Calculus
        \item ($Ax1$) $\varphi \id \varphi$,
        \item ($Ax2$) $(\varphi \id \psi) \ra (\varphi \ra \psi)$,
        \item ($Ax3$) $(\varphi \id \psi) \ra (\lnot \varphi \id \lnot \psi)$,
        \item ($Ax4$) $(\varphi \id \psi) \ra ((\chi \id \theta) \ra ((\varphi \ra \chi) \id (\psi \ra \theta)))$,
        \item ($Ax5$) $(\varphi \id \psi) \ra ((\chi \id \theta) \ra ((\varphi \id \chi) \id (\psi \id \theta)))$.
    \end{itemize}
    The only inference rule is the \emph{modus ponens} rule:
    $$
        \mathsf{MP}: \frac{
            \varphi, \ \varphi \ra \psi}%
        { \psi }
    $$
\end{definition}

\begin{definition}[A thesis of \SCI]
    A \SCI-formula $\varphi$ is \emph{a thesis of \SCI} if there exists a finite sequence of formulas $\Psi = \varphi_1, ..., \varphi_n$ ($n \geq 1$), such that $\varphi = \varphi_n$, and for all $i \in \{1, ..., n\}$ the formula $\varphi_i$ is either an axiom of \SCI, or it is inferred from formulas $\varphi_j$, $\varphi_k$ ($j, k <i$) via the \emph{modus ponens} rule. If $\varphi$ is a thesis of \SCI we will denote it by $\vdash \varphi$, say that $\varphi$ is \emph{provable in \SCI} and call the sequence $\Psi$ the \emph{proof of $\varphi$}.
    \label{thesis}
\end{definition}
%
\begin{remark}
    \label{remark_proof_varphi}
    If we have a proof of some formula $\varphi$ and take a variable $p$ appearing in this formula, we can easily obtain a proof of any formula $\varphi(p/\psi)$. To do it, we simply take the proof of $\varphi$ and replace $p$ with $\psi$ in every formula of the proof. We can do it with axioms, because the resulting formula is still an instance of the same given axiom and all the \emph{modus ponens} inferences are still correct.
\end{remark}
%
\begin{definition}[Derivability in \SCI]
    Given a set of \SCI-formulas $X$, a formula $\varphi$ is \emph{derivable from $X$} if there exists a finite sequence of formulas $\Psi = \varphi_1, ..., \varphi_n$ ($n \geq 1$), such that $\varphi = \varphi_n$, and for all $i \in \{1, ..., n\}$ the formula $\varphi_i$ is either an axiom of \SCI, is an element of $X$, or it is inferred from formulas $\varphi_j$, $\varphi_k$ ($j, k <i$) via the \emph{modus ponens} rule. If $\varphi$ is derivable from $X$ we will denote it by $X \vdash \varphi$ and call the sequence $\Psi$ the \emph{proof of $\varphi$ from $X$}.
\end{definition}
%
In terms of derivability we can see that a formula is a thesis of \SCI if and
only if it is derivable from the empty set.

\begin{remark} For every $\varphi \in \FOR$ and $X, Y \subseteq \FOR$, if $X \subseteq Y$ and $X \vdash \varphi$, then $Y \vdash \varphi$. This is because the proof of $\varphi$ from $X$ is also a proof of $\varphi$ from $Y$.
\end{remark}

\begin{remark} For every $\varphi, \psi \in \FOR$, $\{\varphi, \lnot \varphi\} \vdash \psi$.
    \label{falsehood_proves_all}
    \begin{proof} $\varphi \ra (\lnot \varphi \ra \psi)$ is an instance of a \PC tautology $\alpha \ra (\lnot \alpha \ra \beta)$, so a sequence $\varphi \ra (\lnot \varphi \ra \psi)$, $\lnot \varphi \ra \psi$, $\psi$ is a proof of $\psi$ in $\{\varphi, \lnot \varphi\}$.
    \end{proof}
\end{remark}

\begin{remark}
    \label{phi_not_phi_ra_psi}
    For every $\varphi, \psi \in \FOR, X \subseteq \FOR$, we have that $X \vdash \psi$ if and only if $X \vdash \varphi \ra \psi$ and $X \vdash \lnot \varphi \ra \psi$.

    \begin{proof}
        Left to right. Let $\Psi$ be a proof of $\psi$ in $X$. By adding to it a formula $\psi \ra (\varphi \ra \psi)$, which is an instance of a \PC tautology $\alpha \ra (\beta \ra \alpha)$ we can infer $\varphi \ra \psi$ arriving at proof of $\varphi \ra \psi$ in $X$. In the same way we can arrive at the proof of $\lnot \varphi \ra \psi$ in $X$.

        Right to left. We have proofs of $\varphi \ra \psi$ and $\lnot \varphi \ra
            \psi$ in $X$. Let $\Psi$ be a sequence resulting from appending one after the
        other. Let us append to it a formula $(\varphi \ra \psi) \ra ((\lnot \varphi
            \ra \psi) \ra \psi)$, which is an instance of a \PC tautology $(\alpha \ra \beta)
            \ra ((\lnot \alpha \ra \beta) \ra \beta)$. Then we by \emph{modus ponens} we
        can infer $(\lnot \varphi \ra \psi) \ra \psi$ and then $\psi$ thus arriving at
        the proof of $\psi$ in $X$.
    \end{proof}
\end{remark}

\begin{remark}[Deduction theorem for \SCI]
    For all $X \subseteq \FOR$ and $\varphi, \psi \in \FOR$: $X \cup \{\varphi\} \vdash \psi$ if and only if $X \vdash \varphi \ra \psi$.
    \begin{proof}
        First, let us prove the implication from right to left. Let us assume that $X \vdash \varphi \ra \psi$. Let $\varphi_1, ..., \varphi_n$ be a proof of $\varphi \ra \psi$ in $X$. Let us set $\varphi_{n+1} = \varphi$ and $\varphi_{n+2} = \psi$. Then $\varphi_{n+1} \in X \cup \{\varphi\}$ and $\varphi_{n+2}$ is derived from $\varphi_{n+1}$ and $\varphi_{n}$ via the \emph{modus ponens} rule, so the sequence $\varphi_1, ..., \varphi_n, \varphi_{n+1}, \varphi_{n+2}$ is a proof of $\psi$ in $X \cup \{\varphi\}$.

        The proof in the other direction similarly involves modifying the proof, but is
        slightly more complicated.

        Let us assume that $X \cup \{\varphi\} \vdash \psi$ and let $\varphi_1, ...,
            \varphi_n$ be a proof of $\psi$ in $X \cup \{\varphi\}$. We will describe a
        procedure to modify it to be a proof of $\varphi \ra \psi$ in $X$.

        We will construct a sequence of formulas $\Psi$ by considering each $\varphi_i$
        in turn. We'll uphold an invariant such that after considering $\varphi_i$,
        $\Psi$ will contain a proof of $\varphi \ra \varphi_i$.

        \begin{itemize}
            \item If $\varphi_i$ is an axiom of \SCI, or $\varphi_i \in X$, we append it to
                  $\Psi$. Then we append to $\Psi$ a formula $\varphi_i \ra (\varphi \ra
                      \varphi_i)$, which is an instance of a \PC tautology $\alpha \ra (\beta \ra
                      \alpha)$ and by \emph{modus ponens} infer $\varphi \ra \varphi_i$.
            \item If $\varphi_i = \varphi$, we add to $\Psi$ a formula $\varphi \ra \varphi$,
                  which is an instance of a \PC tautology $\alpha \ra \alpha$,
            \item Otherwise $\varphi_i$ was inferred by \emph{modus ponens} from some formulas
                  $\vartheta, \vartheta \ra \varphi_i$, such that $\vartheta$ and $\vartheta \ra
                      \varphi_i$ were considered before. By our invariant $\varphi \ra \vartheta$ and
                  $\varphi \ra (\vartheta \ra \varphi_i)$ have their proofs in $\Psi$ already.

                  We append to $\Psi$ a formula $(\varphi \ra \vartheta) \ra( (\varphi \ra
                      (\vartheta \ra \varphi_i))$ $ \ra (\varphi \ra \varphi_i) )$, which is an
                  instance of a \PC tautology $(\alpha \ra \beta) \ra ( (\alpha \ra (\beta \ra
                      \gamma)) \ra (\alpha \ra \gamma) )$ and then by \emph{modus ponens} infer
                  $(\varphi \ra (\vartheta \ra \varphi_i)) \ra (\varphi \ra \varphi_i)$ and then
                  $\varphi \ra \varphi_i$.
        \end{itemize}

        It is easy to see that at each step we uphold our invariant and $\varphi$ is
        not directly used in the proof so at the end $\Psi$ is a proof of $\varphi \ra
            \psi$ in $X$.

    \end{proof}
\end{remark}
%
Let us now give some semantic definitions:

\begin{definition}[\SCI-model]
    A model of \SCI (or an \SCI-model) model is a structure $\mathcal{M} = (U, D, \tilde{\lnot}, \tilde{\ra}, \tilde{\id})$ where:
    \begin{itemize}
        \item $U \not = \emptyset$ is an \emph{universe} of $M$,
        \item $\emptyset \not = D \subsetneq U$ is a \emph{set of designated values},
        \item $\tilde{\lnot}$ is an unary operation on $U$, such that for all $a \in U$: $\tilde{\lnot}a \in D$ if and only if $a \not \in D$,
        \item $\tilde{\ra}$ is a binary operation on $U$, such that for all $a, b \in U$: $a \tilde{\ra} b \in D$ if and only if $a \not \in D$ or $b \in D$,
        \item $\tilde{\id}$ is a binary operation on $U$, such that for all $a, b \in U$: $a \tilde{\id} b \in D$ if and only if $a = b$.
    \end{itemize}
    \label{model}
\end{definition}
%
If an universe $U$ is finite, we'll call a given \SCI-model a \emph{finite
    \SCI-model}.

\begin{definition}[Valuation]
    Given an \SCI-model $\mathcal{M} = (U, D, \tilde{\lnot}, \tilde{\ra}, \tilde{\id})$, a valuation in $\mathcal{M}$ is a function $V : \FOR \longrightarrow U$ that assigns a value $V(p) \in U$ for all propositional variables $p$, and such that for all $\varphi, \psi \in \FOR$:
    \begin{itemize}
        \item $V(\lnot \varphi) = \tilde{\lnot}V(\varphi)$
        \item $V(\varphi \ra \psi) = V(\varphi) \tilde{\ra} V(\psi)$
        \item $V(\varphi \id \psi) = V(\varphi) \tilde{\id} V(\psi)$
    \end{itemize}
    If $V(\varphi) = a$ we will call $a$ the \emph{denotation of $\varphi$}.
    \label{valuation}
\end{definition}

\begin{definition}[Satisfaction of a formula]
    Given an \SCI-model $\mathcal{M} = (U, D, \tilde{\lnot}, \tilde{\ra}, \tilde{\id})$ and a valuation $V$ in $\mathcal{M}$, a formula $\varphi$ is \emph{satisfied in $\mathcal{M}$ by $V$} if and only if $V(\varphi) \in D$. If a formula $\varphi$ is satisfied in $\mathcal{M}$ by a valuation $V$, then will denote it by $M, V \models \varphi$.
\end{definition}

\begin{definition}[Truth of a formula]
    Given an \SCI-model $\mathcal{M} = (U, D, \tilde{\lnot}, \tilde{\ra}, \tilde{\id})$, a formula is \emph{true in $\mathcal{M}$} if and only if it is satisfied in $\mathcal{M}$ by all valuations of $\mathcal{M}$. If a formula $\varphi$ is true in $\mathcal{M}$, then we will denote it by $\mathcal{M} \models \varphi$.
\end{definition}

\begin{definition}[Validity of a formula]
    A formula is \emph{valid in \SCI} (or \emph{\SCI-valid}) if and only if it is true in all models. If a formula $\varphi$ is \SCI-valid we will denote it by $ \models \varphi$.
\end{definition}

\begin{theorem}[Soundness of \SCI]
    For every \SCI-formula $\varphi$, if $\varphi$ is provable in \SCI, then $\varphi$ is valid in \SCI.
    \label{soundness}
\end{theorem}
\begin{proof}
    The proof will have two main parts:
    \begin{enumerate}[(a)]
        \item Every axiom of \SCI is valid in \SCI.
        \item By applying the \emph{modus ponens} rule to valid formulas $\varphi$ and
              $\varphi \ra \psi$ the inferred formula $\psi$ is also valid.
    \end{enumerate}

    Let us show (a) first:
    \begin{itemize}
        \item First, we need to prove that every tautology of the classical Propositional
              Calculus (\PC) is valid in \SCI.

              Let $\varphi$ be a tautology of \PC. Let us take any \SCI-model $\mathcal{M}$
              and any \SCI-valuation $\mathcal{M}, V$ in it. We want to show that
              $\mathcal{M}, V \models \varphi$.

              Given $\mathcal{M}, V$, we will construct $V'$ that will be a \PC valuation of
              $\varphi$. We can do this, because $\varphi$ doesn't contain operator $\id$.

              For every $\psi \in \SUB(\varphi)$, let us define:

              $$
                  V'(\psi) = \begin{cases}
                      1,                           & \text{if } \psi = p \in \V \text{ and } V(p) \in D,      \\
                      0,                           & \text{if } \psi = p \in \V \text{ and } V(p) \not \in D, \\
                      1-V'(\chi),                  & \text{if } \psi = \lnot \chi,                            \\
                      max(1-V'(\chi), V'(\theta)), & \text{if } \psi = \chi \ra \theta.                       \\
                  \end{cases}
              $$

              It is easy to see that for every $\psi \in \SUB(\varphi)$, $V'(\psi) = 1$ if
              and only if $V(\psi) \in D$.

              The $V'$ function is constructed in the same way the valuation function in the
              \PC is constructed, therefore since $\varphi$ is a tautology of \PC, we have
              that $V'(\varphi) = 1$. So, we have that $V(\varphi) \in D$, what is what we
              wanted to show.

        \item Second, we want to show that axioms $(Ax1) - (Ax5)$ are valid in \SCI.

              \begin{itemize}
                  \item $(Ax1)\  \varphi \id \varphi$

                        Let us take any \SCI model and valuation $\mathcal{M}, V$. Based on
                        \cref{valuation}, we have that $V(\varphi \id \varphi) = V(\varphi) \tilde{\id}
                            V(\varphi)$. Based on definition of $\tilde{\id}$ from \ref{model}, we have
                        that $V(\varphi) \tilde{\id} V(\varphi)$ is in $D$ if and only if $V(\varphi) =
                            V(\varphi)$, which is trivially the case. So, we have that $\mathcal{M}, V
                            \models \varphi \id \varphi$.
                  \item $(Ax2)\ (\varphi \id \psi) \ra (\varphi \ra \psi)$

                        Let us take any \SCI model and valuation $\mathcal{M}, V$. Based on
                        \cref{valuation}, we have that $V((\varphi \id \psi) \ra (\varphi \ra \psi)) =
                            V(\varphi \id \psi) \tilde{\ra} V(\varphi \ra \psi)$. There are two cases.

                        \begin{enumerate}
                            \item[1°] $V(\varphi \id \psi) \not \in D$. Then, by definition of $\tilde{\ra}$ in \ref{model}, we have that $V(\varphi \id \psi) \tilde{\ra} V(\varphi \ra \psi) \in D$, so $\mathcal{M}, V \models (\varphi \id \psi) \ra (\varphi \ra \psi)$.
                            \item[2°] $V(\varphi \id \psi) \in D$. By \cref{valuation} it means, that $V(\varphi) \tilde{\id} V(\psi)$, which by \cref{model} means that $V(\varphi) = V(\psi)$.

                                By \cref{valuation} $V(\varphi \ra \psi)$ is equal to $V(\varphi) \tilde{\ra}
                                    V(\psi)$. By \cref{model} $V(\varphi) \tilde{\ra} V(\psi)$ is in $D$ if and
                                only if $V(\varphi) \not \in D$ or $V(\psi) \in D$, but since $V(\varphi) =
                                    V(\psi)$ we have that $V(\varphi) \tilde{\ra} V(\psi)$ is in $D$ if and only if
                                $V(\varphi) \not \in D$ or $V(\varphi) \in D$, which is trivially the case.
                        \end{enumerate}

                        So, we have that $\mathcal{M}, V \models (\varphi \id \psi) \ra (\varphi \ra
                            \psi)$.

                  \item Validity of axioms $(Ax3), (Ax4)$ and $(Ax5)$ can be shown in a similar way.
                            {\color{red}(TODO: a może rozpisać dla jasności?)}
              \end{itemize}
    \end{itemize}

    To show (b), let us take any valid formulas $\varphi$ and $\varphi \ra \psi$ and
    any \SCI model and valuation $\mathcal{M}, V$. From validity of $\varphi \ra
        \psi$, we know that $V(\varphi \ra \psi) \in D$. From \cref{valuation} we have
    that $D \ni V(\varphi \ra \psi) = V(\varphi) \tilde{\ra} V(\psi)$. From
    \cref{model}, since we know that $V(\varphi) \tilde{\ra} V(\psi)$ we know that
    $V(\varphi) \not \in D$, or $V(\psi) \in D$. But we have that $\varphi$ is
    valid, so $V(\varphi) \in D$, so it must be that $V(\psi) \in D$, so
    $\mathcal{M}, V \models \psi$. The same holds for any other \SCI model and
    valuation, so $\models \psi$, which is what we wanted to show.

    Now, looking at \cref{thesis}, for a given provable $\varphi$, let us take its
    proof $\varphi_1, ..., \varphi_n = \varphi$. Every subsequent formula in this
    proof is either an \SCI axiom and thus, by (a), valid, or is inferred by the
    \emph{modus ponens} rule from valid formulas and thus, by (b), valid. So,
    $\varphi$ is valid.
\end{proof}

\begin{theorem}[Completeness of \SCI]
    For every \SCI-formula $\varphi$, if $\varphi$ is valid in \SCI, then $\varphi$ is provable in \SCI.
\end{theorem}
\begin{proof}
    To show that every valid \SCI-formula is \SCI-provable is, by contraposition, to show that every non-\SCI-provable formula is non-\SCI-valid.

    Let us take a non-\SCI-provable formula $\hat{\varphi}$. We will construct an
    \SCI-model and a valuation in which $\hat{\varphi}$ is not true, thus showing
    that it is not \SCI-valid.

    First, let us define a maximal consistent set of formulas of which
    $\hat{\varphi}$ will not be an element of. Let $\varphi_1, \varphi_2, ...$ be
    all formulas of $\FOR$ in order of $\prec$, and then let us define:

    \begin{itemize}
        \item $d_0 = \emptyset$
        \item For $i \in \N_+$: $$ d_{i} = \begin{cases}
                      d_{i-1} \cup \{\varphi_i\}, & \text{if } d_{i-1} \cup \{\varphi_i\} \not \vdash \hat{\varphi} \\
                      d_{i-1},                    & \text{otherwise}                                                \\
                  \end{cases}
              $$
        \item $d = \bigcup d_i$
    \end{itemize}

    Let us show some properties of $d_i$ and $d$:
    \begin{remark}
        $d \not \vdash \hat{\varphi}$. Since $\hat{\varphi}$ is not \SCI-provable we know that $d_0 \not \vdash \hat{\varphi}$, and each subsequent $d_i$ is constructed in such a way that $d_i \not \vdash \hat{\varphi}$.
    \end{remark}
    \begin{remark}
        \label{d_in_same_follows}
        For all $\varphi_i \in \FOR$: $\varphi_i \in d$ if and only if $d \vdash
            \varphi_i$. Left to right is trivial. Right to left: since we know that $d \not
            \vdash \hat{\varphi}$ and we have that $d \vdash \varphi_i$ we have that $d
            \cup \{\varphi_i\} \not \vdash \hat{\varphi}$, so $d_{i-1} \cup \{\varphi_i\} \not \vdash \hat{\varphi}$, so $d_i = d_{i-1} \cup
            \{\varphi_i\}$.
    \end{remark}
    \begin{remark}
        \label{d_has_theorems}
        For all $\varphi_i \in \FOR$ such that $\vdash \varphi_i$, $\varphi_i \in d$. This is trivially true from \cref{d_in_same_follows}.
    \end{remark}
    %
    Let us now define a relation $R$ on \SCI-formulas: $$ \varphi R \psi \text{ if
            and only if } \varphi \id \psi \in d $$
    %
    Note that for clarity we're using infix notation for relations. We now want to
    show that $R$ is an equivalence relation.
    \begin{itemize}[]
        \item $R$ is reflexive. Trivial from axiom $(Ax1)$ and \cref{d_has_theorems}.
        \item $R$ is symmetrical, that is for all $\varphi, \psi \in \FOR, \varphi R \psi$ if and only if $\psi R \varphi$.

              From \cref{ex_pqqp} below and \cref{remark_proof_varphi} we can prove that for
              all $\varphi, \psi \in \FOR$, $\vdash (\varphi \id \psi) \ra (\psi \id
                  \varphi)$. If $\varphi R \psi$, then $d \vdash \varphi \id \psi$, so by
              \emph{modus ponens} we can infer $d \vdash \psi \id \varphi$, so $\psi R
                  \varphi$. In the same way we can show that if $\psi R \varphi$ then $\varphi R
                  \psi$, so $R$ is symmetrical.
        \item $R$ is transitive, that is for all $\varphi, \psi, \vartheta \in \FOR$, if $\varphi R \psi$ and $\psi R \vartheta$ then $\varphi R \vartheta$.

              From \cref{ex_pqr} below and \cref{remark_proof_varphi}, we can prove that for
              all $\varphi, \psi, \vartheta \in \FOR$, $\vdash (\psi \id \vartheta) \ra
                  ((\varphi \id \psi) \ra (\varphi \id \vartheta))$. Let us assume that $\varphi
                  R \psi$ and $\psi R \vartheta$. This gives us that $d \vdash \varphi \id \psi$
              and $d \vdash \psi \id \vartheta$. Applying \emph{modus ponens} twice we get $d
                  \vdash \varphi \id \vartheta$, so $\varphi R \vartheta$.
    \end{itemize}
    %
    So, $R$ is an equivalence relation. Let us now show that it is a congruence,
    that is:
    \begin{itemize}[]
        \item For all $\varphi, \psi \in \FOR$, if $\varphi R \psi$, then $\lnot \varphi R
                  \lnot \psi$. This is trivially true from axiom $(Ax3)$ and \cref{d_has_theorems}.
        \item For all $\varphi, \psi, \vartheta, \chi \in \FOR$, if $\varphi R \psi$ and
              $\vartheta R \chi$, then $\varphi \ra \vartheta R \psi \ra \chi$. This is
              easily proven from $(Ax4)$ and \cref{d_has_theorems}.
        \item For all $\varphi, \psi, \vartheta, \chi \in \FOR$, if $\varphi R \psi$ and
              $\vartheta R \chi$, then $\varphi \id \vartheta R \psi \id \chi$. This is
              easily proven from $(Ax5)$ and \cref{d_has_theorems}.
    \end{itemize}
    %
    Now that we know that $R$ is a congruent equivalence relation, let us define:
    \begin{itemize}
        \item $U = \{ |\varphi|_R : \varphi \in \FOR \}$ (by $|\varphi|_R$ we mean an equivalence class of $R$ of which $\varphi$ is a member),
        \item $D = \{ |\varphi|_R : \varphi \in d\}$
        \item $\tilde{\lnot}$ is an unary function on equivalence classes of $R$, such that $\tilde{\lnot}|\varphi|_R \stackrel{def}{=} |\lnot \varphi|_R$
        \item $\tilde{\ra}$ is a binary function on equivalence classes of $R$, such that $|\varphi|_R \tilde{\ra} |\psi|_R \stackrel{def}{=} |\varphi \ra \psi|_R$
        \item $\tilde{\id}$ is a binary function on equivalence classes of $R$, such that $|\varphi|_R \tilde{\id} |\psi|_R \stackrel{def}{=} |\varphi \id \psi|_R$
    \end{itemize}
    %
    Let us add some comments:
    \begin{itemize}
        \item For any \SCI-formulas $\varphi, \psi$, such that $\varphi \id \psi$, $d \vdash
                  \varphi$ if and only if $d \vdash \psi$. This follows from $(Ax2)$. Because of
              that, $|\varphi|_R = |\psi|_R$ and so $D$ is well defined.
        \item From congruence of $R$, we know that for any $\varphi, \psi \in \FOR$ if
              $|\varphi|_R = |\psi|_R$, then $|\lnot \varphi|_R = |\lnot \psi|_R$, so
              $\tilde{\lnot}$ is a well defined function.
        \item Similarly, form the congruence of $R$ we can see that $\tilde{\ra}$ and
              $\tilde{\id}$ are well defined functions.
    \end{itemize}
    %
    Now we will want to show that $\mathcal{M}$ is an \SCI-model. From the
    \cref{model} we want to show that:
    \begin{itemize}
        \item $U \not = \emptyset$ -- this is trivial, $|p|_R \in U$
        \item $\emptyset \not = D$ -- this is true, because for example $\vdash p \id p$, so from \cref{d_has_theorems} $|p \id p|_R \in D$
        \item $D \subsetneq U$ --  $D \subseteq U$ is trivial from the definition of $D$. $D \not = U$, because $\hat{\varphi} \not \in d$, because $\{\hat{\varphi}\} \vdash \hat{\varphi}$.
        \item For all $a \in U: \tilde{\lnot} a \in D$ if and only if $a \not \in D$.

              Let us take any $a \in U$. We know that there is a formula $\varphi \in \FOR$,
              such that $a = |\varphi|_R$. Let us take any such $\varphi$. From the
              definition of $\tilde{\lnot}$ we know that $\tilde{\lnot}|\varphi|_R = |\lnot
                  \varphi|_R$.

              We will show that $\lnot \varphi \in d$ if and only if $\varphi \not \in d$.
              Let us assume that $\varphi = \varphi_i$ and $\lnot \varphi = \varphi_j$. Let's
              assume for now that $i < j$.

              There are two cases:
              \begin{itemize}
                  \item $\varphi_i \in d_i$. We want to show that $\varphi_j$ was not added to $d_j$. From \cref{falsehood_proves_all} we know that $\{\varphi, \lnot \varphi\} \vdash \hat{\varphi}$ and so $d_{i-1} \cup \{\varphi_j\} \vdash \hat{\varphi}$. $d_{i-1} \subseteq d_{j-1}$ so $d_{j-1} \cup \{\varphi_j\} \vdash \hat{\varphi}$, so $\varphi_j \not \in d_j$.
                  \item $\varphi_i \not \in d_i$. We want to show that $\varphi_j$ was added to $d_j$, that is that $d_{j-1} \cup \{\varphi_j\} \not \vdash \hat{\varphi}$.

                        Let us assume the opposite, that $d_{j-1} \cup \{\lnot \varphi\} \vdash
                            \hat{\varphi}$. From the deduction theorem we have that $d_{j-1} \vdash \lnot
                            \varphi \ra \hat{\varphi}$. Since $\varphi_i \not \in d_i$ we know that
                        $d_{i-1} \cup \{\varphi\} \vdash \hat{\varphi}$. Because $d_{i-1} \subseteq
                            d_{j-1}$ we have that $d_{j-1} \cup \{\varphi\} \vdash \hat{\varphi}$ and again
                        from the deduction theorem $d_{j-1} \vdash \varphi \ra \hat{\varphi}$.

                        Let us take the proof of $\lnot \varphi \ra \hat{\varphi}$ in $d_{j-1}$ and
                        append to it the proof of $\varphi \ra \hat{\varphi}$ creating a sequence
                        $\Psi$. Then let us append to $\Psi$ a formula $(\varphi \ra \hat{\varphi}) \ra
                            ((\lnot \varphi \ra \hat{\varphi} ) \ra \hat \varphi)$, which is an instance of
                        a \PC tautology $(\alpha \ra \beta) \ra ((\lnot \alpha \ra \beta) \ra \beta)$.
                        Then, by \emph{modus ponens} we can infer $(\lnot \varphi \ra \hat{\varphi} )
                            \ra \hat \varphi$ and then $\hat{\varphi}$ thus proving that $d_{j-1} \vdash
                            \hat{\varphi}$. But this is a contradiction, because we know that $d_{j-1} \not
                            \vdash \hat{\varphi}$. So our assumption that $d_{j-1} \cup \{\lnot \varphi\}
                            \vdash \hat{\varphi}$ was false, so $\varphi_j \in d_j$.
              \end{itemize}

              We can see that if $i > j$ the proof will be analogous. {\color{red} Na pewno? Może rozpisać dla pewności?}

        \item For all $a, b \in U: a \tilde{\ra}b \in D$ if and only if $a \not \in D$ or $b
                  \in D$.

              Let us take any $a, b \in U$. We know that there exist $\varphi, \psi \in
                  \FOR$, such that $|\varphi|_R = a, |\psi|_R = b$. From the definition of
              $\tilde{\ra}$ we have that $|\varphi|_R \tilde{\ra} |\psi|_R = |\varphi \ra
                  \psi|_R$. So, we want to show that $|\varphi \ra \psi|_R \in D$ if and only if
              $|\varphi|_R \not \in D$ or $|\psi|_R \in D$, so to show that $\varphi \ra \psi
                  \in d$ if and only if $\varphi \not \in d$ or $\psi \in d$. Let us assume that
              $\varphi = \varphi_i$, $\psi = \varphi_j$ and $\varphi \ra \psi = \varphi_k$.
              Because $s(\varphi) < s(\varphi \ra \psi)$ and $s(\psi) < s(\varphi \ra \psi)$
              we know that $i < k$ and $j < k$ which will slightly simplify the proof. There
              are three cases:
              \begin{itemize}
                  \item $\psi \in d$. We know that $d_{j-1} \cup \{\psi\} \not \vdash \hat{\varphi}$ and want to show that $d_{k-1} \cup \{\varphi \ra \psi\} \not \vdash \hat{\varphi}$.

                        Let us assume the opposite, that $d_{k-1} \cup \{\varphi \ra \psi\} \vdash
                            \hat{\varphi}$. By the deduction theorem we have that $d_{k-1} \vdash (\varphi
                            \ra \psi) \ra \hat{\varphi}$. Let $\Psi$ be the proof of $(\varphi \ra \psi)
                            \ra \hat{\varphi}$ in $d_{k-1}$. Let us append to $\Psi$ a formula $((\varphi
                            \ra \psi) \ra \hat{\varphi}) \ra (\psi \ra \hat{\varphi})$. Then by modus
                        ponens we can infer $\psi \ra \hat{\varphi}$, so we have a proof of $\psi \ra
                            \hat{\varphi}$ in $d_{k-1}$. By the deduction theorem $d_{k-1} \cup \{\psi\}
                            \vdash \hat{\varphi}$. But we know that $\psi \in d_{j-1}$ and because $d_{j-1}
                            \subseteq d_{k-1}$, we know that $d_{k-1} \cup \{\psi\} = d_{k-1}$. So we have
                        arrived at $d_{k-1} \vdash \hat{\varphi}$, which is a contradiction. So we know
                        that $d_{k-1} \cup \{\varphi \ra \psi\} \not \vdash \hat{\varphi}$ so $\varphi
                            \ra \psi \in d$.

                  \item $\varphi \not \in d$. The case when $\psi \in d$ is described above, so let us assume that $\psi \not \in d$. We know that $d_{i-1} \cup \{\varphi\} \vdash \hat{\varphi}$ and $d_{j-1} \cup \{\psi\} \vdash \hat{\varphi}$, so by the deduction theorem we know that $d_{i-1} \vdash \varphi \ra \hat{\varphi}$ and $d_{j-1} \vdash \psi \ra \hat{\varphi}$, and because $i, j < k$ we know that $d_{k-1} \vdash \varphi \ra \hat{\varphi}$ and $d_{k-1} \vdash \psi \ra \hat{\varphi}$. We want to show that $\varphi \ra \psi \in d$, that is $d_{k-1} \cup \{\varphi \ra \psi\} \not \vdash \hat{\varphi}$.

                        Let us assume the opposite, that $d_{k-1} \cup \{\varphi \ra \psi\} \vdash
                            \hat{\varphi}$. By deduction theorem we have that $d_{k-1} \vdash (\varphi \ra
                            \psi) \ra \hat{\varphi}$.

                        Let $\Psi$ be a sequence we get by appending the proof of $\varphi \ra
                            \hat{\varphi}$ in $d_{k-1}$ and the proof of $\psi \ra \hat{\varphi}$ in
                        $d_{k-1}$ to the proof of $(\varphi \ra \psi) \ra \hat{\varphi}$ in $d_{k-1}$.
                        Then, let us append to $\Psi$ the formula $((\varphi \ra \psi) \ra
                            \hat{\varphi}) \ra ((\varphi \ra \hat{\varphi}) \ra ((\psi \ra \hat{\varphi})
                            \ra \hat{\varphi}))$, which is an instance of a \PC tautology $((\alpha \ra \beta)
                            \ra \gamma) \ra ( (\alpha \ra \gamma) \ra ((\beta \ra \gamma) \ra \gamma))$.
                        Then by \emph{modus ponens} we can infer $(\varphi \ra \hat{\varphi}) \ra
                            ((\psi \ra \hat{\varphi}) \ra \hat{\varphi})$, then we can infer $(\psi \ra
                            \hat{\varphi}) \ra \hat{\varphi}$ and finally we can infer $\hat{\varphi}$ thus
                        proving that $d_{k-1} \vdash \hat{\varphi}$ which is a contradiction. So we
                        know that $d_{k-1} \cup \{\varphi \ra \psi\} \not \vdash \hat{\varphi}$ so
                        $\varphi \ra \psi \in d$.
                  \item $\varphi \in d, \psi \not \in d$. We want to show that $\varphi \ra \psi \not \in d$. As we have shown above, from $\varphi \in d$ we know that $\lnot \varphi \not \in d$. Let $\lnot \varphi = \varphi_l$. We know that $l < k$.

                        So, we have that $d_{l-1} \cup \{\lnot \varphi\} \vdash \hat{\varphi}$,
                        $d_{j-1} \cup \{\psi\} \vdash \hat{\varphi}$ and want to show that $d_{k-1}
                            \cup \{\varphi \ra \psi\} \vdash \hat{\varphi}$. By the deduction theorem we
                        have that $d_{l-1} \vdash \lnot \varphi \ra \hat{\varphi}$, $d_{j-1} \vdash
                            \psi \ra \hat{\varphi}$ and want to show that $d_{k-1} \vdash (\varphi \ra
                            \psi) \ra \hat{\varphi}$.

                        Let $\Psi$ be a proof of $\lnot \varphi \ra \hat{\varphi}$ in $d_{l-1}$ with a
                        proof of $\psi \ra \hat{\varphi}$ in $d_{j-1}$ appended to it. Then let us
                        append to $\Psi$ a formula $(\lnot \varphi \ra \hat{\varphi}) \ra ((\psi \ra
                            \hat{\varphi}) \ra ((\varphi \ra \psi)\ra \hat{\varphi}))$ which is an instance
                        of a \PC theorem $(\lnot \alpha \ra \gamma) \ra ((\beta \ra \gamma) \ra
                            ((\alpha \ra \beta) \ra \gamma))$. Them by \emph{modus ponens} we can infer
                        $(\psi \ra \hat{\varphi}) \ra ((\varphi \ra \psi)\ra \hat{\varphi})$ and
                        $(\varphi \ra \psi)\ra \hat{\varphi}$ arriving at the proof of $(\varphi \ra
                            \psi) \ra \hat{\varphi}$ in $d_{k-1}$, thus showing that $\varphi \ra \psi \not
                            \in d$.
              \end{itemize}
        \item For all $a, b \in U: a \tilde{\id}b \in D$ if and only if $a = b$.

              Let us take any $a,b \in U$. We know that there exist $\varphi, \psi \in \FOR$
              such that $|\varphi|_R = a, |\psi|_R = b$. From the definition of $\tilde{\id}$
              we have that $|\varphi|_R \tilde{\id} |\psi|_R \in D$ if and only if $|\varphi
                  \id \psi|_R \in D$, that is if and only if $\varphi \id \psi \in d$.

              On the other hand, $a = b$ if and only if $|\varphi|_R = |\psi|_R$, which from
              the definition of $R$ means that $d \vdash \varphi \id \psi$, which from
              \cref{d_in_same_follows} is the case if and only if $\varphi \id \psi \in d$.

    \end{itemize}
    %
    So, $\mathcal{M}$ is a \SCI-model. Now, let us define a valuation $V$ for all
    $\varphi \in \FOR$: $$ V(\varphi) = |\varphi|_R $$
    %
    We need to show that $V$ is indeed a valuation, that is that for all $\varphi,
        \psi \in \FOR$:
    \begin{itemize}
        \item $V(\lnot \varphi) = \tilde{\lnot}V(\varphi)$. From the definition of $V$, we want to show that $|\lnot \varphi|_R = \tilde{\lnot}|\varphi|_R$, but that is true from the definition of $\tilde{\lnot}$.
        \item $V(\varphi \ra \psi) = V(\varphi) \tilde{\ra} V(\psi)$. Same as above, from definitions of $V$ and $\tilde{\ra}$.
        \item $V(\varphi \id \psi) = V(\varphi) \tilde{\id} V(\psi)$. Same as above, from definitions of $V$ and $\tilde{\id}$.
    \end{itemize}
    %
    Now, for the final proof of completeness let us take a non-provable formula
    $\varphi$. Since $\not \vdash \varphi$ we have that $|\varphi|_R \not \in D$,
    so $V(\varphi) \not \in D$. So, we have found a model and a valuation
    $\mathcal{M},V$, such that $\mathcal{M},V \not \models \varphi$, so $\varphi$
    is not valid.
\end{proof}

\begin{definition}[Decidability]
    A logic is \emph{decidable} if there exists an effective method, that is, an algorithm that will always terminate, to determine whether a given formula of this logic is a theorem.
\end{definition}
%
We will want to show that \SCI is decidable. To do this, first let us show the
following:
\begin{theorem}[Finite model property of \SCI]
    \label{finite_model}
    For any $\varphi \in \FOR$, if there exists $\mathcal{M},V$, such that $\mathcal{M},V \models \varphi$, then there exists a finite \SCI-model $\mathcal{M'},V'$, such that $\mathcal{M'},V'\models \varphi$.
\end{theorem}
\begin{proof}
    {\color{red} Ten dowód nie jest poprawny, dyskusja w osobnym PDFie}
    We are given $\mathcal{M}, V$ and $\varphi \in \FOR$, such that $\mathcal{M}, v \models \varphi$. Let us define $\mathcal{M'} = (U', D', \tilde{\lnot}', \tilde{\ra}')$ and $V'$:
    \begin{itemize}
        \item $U' = \{V(\psi) : \psi \in \SUB(\varphi)\} \cup \{1, 0\}$ -- let us create $1, 0$, such that $1, 0 \not \in U$,

        \item $D' = \{V(\psi) : \psi \in \SUB(\varphi), V(\psi) \in D\} \cup \{1\}$
        \item $
                  \tilde{\lnot}'a = \begin{cases}
                      \tilde{\lnot}a , & \text{if } a \in U \text{ and } \tilde{\lnot}a \in U' \\
                      0,               & \text{otherwise, if } a \in D'                        \\
                      1,               & \text{otherwise, if } a \not \in D'                   \\
                  \end{cases}
              $
        \item $
                  a\tilde{\ra}'b = \begin{cases}
                      a\tilde{\ra}b , & \text{if } a, b \in U \text{ and } a \tilde{\ra} b \in U' \\
                      1,              & \text{otherwise, if } a \not \in D' \text{ or } b \in D'  \\
                      0,              & \text{otherwise, if } a \in D' \text{ and } b \not \in D' \\
                  \end{cases}
              $
        \item $
                  a\tilde{\id}'b = \begin{cases}
                      a\tilde{\id}b , & \text{if } a,b \in U \text{ and } a \tilde{\id} b \in U' \\
                      1,              & \text{otherwise, if } a = b,                             \\
                      0,              & \text{otherwise, if }a \not = b.                         \\
                  \end{cases}
              $
        \item $V'(\psi) = \begin{cases}
                      V(\psi) , & \text{if } V(\psi) \in U'                \\
                      1,        & \text{otherwise, if } V(\psi) \in D      \\
                      0,        & \text{otherwise, if } V(\psi) \not \in D \\
                  \end{cases}$
    \end{itemize}
    %
    Let us explicate some trivial properties:
    \begin{remark}
        \label{trivial_1}
        For all $a \in U'$, $a \in D'$ if and only if $a \in D$ or $a = 1$.
    \end{remark}
    \begin{remark}
        \label{trivial_2}
        For all $\psi \in \FOR$, $V'(\psi) \in D'$ if and only if $V(\psi) \in D$.
    \end{remark}
    %
    We need to show that $\mathcal{M'}$ is an \SCI-model, $V'$ is a valuation and
    that $V'(\varphi) \in D'$:
    \begin{itemize}
        \item $\emptyset \not = U' \supsetneq D' \not = \emptyset$ -- trivially from $0, 1 \in U', 1 \in D'$, $0 \not \in D'$.
        \item For all $a \in U'$, $\tilde{\lnot}'a \in D'$ if and only if $a \not \in D'$ --
              there are cases:
              \begin{enumerate}
                  \item[1°] $a \in \{1, 0\}$. It is easy to see that $\tilde{\lnot}'1 = 0$ and $\tilde{\lnot}'0 = 1$.
                  \item[2°] $a \in U' \setminus \{1, 0\}$ and $\tilde{\lnot} a \in U'$.

                      Since $\mathcal{M}$ is a model, we know that $\tilde{\lnot}a \in D$ if and only
                      if $a \not \in D$. From \cref{trivial_1} we get $\tilde{\lnot}a \in D'$ if and
                      only if $a \not \in D'$ and from the definition of $\tilde{\lnot}'$ we're in
                      the case where $\tilde{\lnot}'a = \tilde{\lnot} a$, so we get $\tilde{\lnot}'a
                          \in D'$ if and only if $a \not \in D'$.

                  \item[3°] Otherwise, and $a \in D'$. Then $\tilde{\lnot}'a = 0 \not \in D'$.
                  \item[4°] Otherwise, and $a \not \in D'$. Then $\tilde{\lnot}'a = 1 \in D'$.
              \end{enumerate}
        \item For all $\psi \in \FOR$, $V'(\lnot \psi) = \tilde{\lnot}'V'(\psi)$ -- there are
              cases:
              \begin{enumerate}
                  \item[1°] $V(\lnot \psi) \in U'$ and $V(\psi) \in U'$. From the definition of $V'$ we have that $V'(\lnot \psi) = V(\lnot \psi)$ and $V'(\psi) = V(\psi)$. So we want to show that $V(\lnot \psi) = \tilde{\lnot}'V(\psi)$, but from the definition of $\tilde{\lnot}'$, since $V(\psi) \in U'$, we know that $\tilde{\lnot}'V(\psi) = \tilde{\lnot}V(\psi)$, so we want to show that $V(\lnot \psi) = \tilde{\lnot}V(\psi)$, which is the case, because $\mathcal{M}$ is a model.
                  {\color{red}
                  \item [2°] $V(\lnot \psi) \in U'$ and $V(\psi) \not \in U'$.
                  \begin{enumerate}
                    \item[2.1°] $V(\psi) \in D$. 
                    
                    Then from the definition of $V'$ we have that $V'(\psi) = 1$ so $\tilde{\lnot}'V'(\psi) = 0$.
                    
                    On the other hand: $V'(\lnot \psi) = V(\lnot \psi) \not = 0$
                  \end{enumerate}
                  }
                  \item[2°] $V(\lnot \psi) \not \in U'$ and $V(\lnot \psi) \in D$. From the definition of $V'$, $V'(\lnot \psi) = 1$. Since $V(\lnot \psi) \in D$ and $V$ is a valuation, we know that $V(\psi) \not \in D$, so $V'(\psi) \not \in D'$. So, from the definition of $\tilde{\lnot}'$ we have that $\tilde{\lnot}'V'(\psi) = 1$.
                  \item[3°] $V(\lnot \psi) \not \in U'$ and $V(\lnot \psi) \not \in D$. Analogously to 2°.
              \end{enumerate}
        \item For all $a, b \in U'$, $a \tilde{\ra}'b \in D'$ if and only if $a \not \in D'$
              or $b \in D'$ -- there are cases:
              \begin{enumerate}
                  \item[1°] $a \in \{1, 0\}$ or $b \in \{1, 0\}$. Directly from the definition of $\tilde{\ra}'$ we get:
                      \begin{itemize}
                          \item $0 \tilde{\ra}' b = 1 \in D'$
                          \item $1 \tilde{\ra}' b \in D'$ if and only if $b \in D'$
                          \item $a \tilde{\ra}' 0 \in D'$ if and only if $a \not \in D'$
                          \item $a \tilde{\ra}' 1 = 1 \in D'$
                      \end{itemize}
                  \item[2°] $a, b \in U' \setminus \{1, 0\}$ and $a \tilde{\ra}' b \in U'$. Similarly to $\tilde{\lnot}'$, since $\mathcal{M}$ is a model, we know that $a \tilde{\ra} b \in D$ if and only if $a \not \in D$ or $b \in D$. From \cref{trivial_1} we get $a \tilde{\ra} b \in D'$ if and only if $a \not \in D'$ or $b \in D'$ and from the definition of $\tilde{\ra}'$ we're in the case where $a \tilde{\ra}'b = a \tilde{\ra} b$ so we get $a \tilde{\ra}' b \in D'$ if and only if $a \not \in D'$ or $b \in D'$.
                  \item[3°] $a, b \in U' \setminus \{1, 0\}$ and $a \not \in D'$ or $b \in D'$. Then $a \tilde{\ra}' b = 1 \in D'$.
                  \item[4°] $a, b \in U' \setminus \{1, 0\}$ and $a \in D'$ and $b \not \in D'$. Then $a \tilde{\ra}' b = 0 \not \in D'$.

              \end{enumerate}
        \item For all $\psi, \vartheta \in \FOR$, $V'(\psi \ra \vartheta) = V'(\psi)
                  \tilde{\ra}' V'(\vartheta)$ -- there are cases:
              \begin{enumerate}
                \item[1°] aa
              \end{enumerate}
        \item ... TODO
    \end{itemize}
\end{proof}

\begin{theorem}[Decidability of \SCI]
    \label{decidability}
    \SCI is decidable.
\end{theorem}
\begin{proof}
    Let us take any \SCI-formula $\varphi$. We want to know if $\varphi$ is a \SCI-theorem. From fullness and completeness of \SCI we know that $\varphi$ is a theorem if and only if $\lnot \varphi$ has no \SCI-model and valuation $\M, V$, such that $\M, V \models \lnot \varphi$. But from \cref{finite_model} we know that if there is $\M, V$, such that $\M, V \models \lnot \varphi$, then there is a finite model $\M'$ and $V'$ such that $\M', V' \models \lnot \varphi$. Furthermore, from the proof of \cref{finite_model} we can see that $|U'| \leq |\SUB(\varphi)|$ ($|X|$ here meaning the size of a set $X$).

    For any finite \SCI-model $\M'$ and \SCI-valuation $V'$ we can construct an
    isomorphic model $\M''$ with $U'' = \{1, 2, ..., |U'|\}$ by setting any
    bijection $f : U' \rightarrow U''$ and then setting the rest of the model and
    $V''$ accordingly. So, we know that if there is $\M, V$ such that $\M, V
        \models \lnot \varphi$, then and only then there is a $\M'', V''$, such that
    $\M'', V'' \models \lnot \varphi$ and $U'' = \{1, 2, ..., |\SUB(\lnot
        \varphi)|\}$. There is a finite amount of such finite models.

    We can have a procedure to set $D''$ to be any of $2^{|\SUB(\lnot \varphi)|}$
    subsets of $U''$, then for any $a \in U''$ to set $\tilde{\lnot}a$ to be any
    element of $U''$, then for any $a, b \in U''$ to set $a \tilde{\ra} b$ to be
    any element of $U''$, then for any $a, b \in U''$ to set $a \tilde{\id} b$ to
    be any element of $U''$ and then to set every variable of $\lnot \varphi$ to be
    any element of $U''$ and finally to check, whether such constructed $\M'', V''$
    is a \SCI-model and a correct valuation. If it happens to be the case, then we
    have found a \SCI-model invalidating $\varphi$. If after checking every such
    combination we have not found any \SCI-model invalidating $\varphi$, we know
    that $\varphi$ is valid, and so that it is a theorem.

    If we set $n = s(\varphi)$, then this procedure will take $O({n} ^ {2^n})$
    operations, so it is very far from practical, but it is nevertheless finite, so
    we have a finite procedure to decide whether $\varphi$ is a \SCI-theorem.

\end{proof}

\section{Deduction in \SCI}

\subsection{Deduction systems}

The axiomatization of \SCI we presented in \cref{axiomatization} is an example
of a Hilbert-style deductive system. Such systems consist of a set of axioms
and inference rules (often \emph{modus ponens} is the only inference rule) that
can be used to deduce theses, as explained in \cref{thesis}.

Hilbert-style systems are historically first and most fundamental deductive
systems. For every thesis of such systems, there is a sequence of formulas all
the way back to the axioms, from which a resulting thesis is inferred. But
trying to prove some specific formula can be very challenging as it requires
creative usages of the axioms so that the given formula is inferred at the end.
Those proof systems give no clue how to do that.

The same is true for the deduction system presented in
\cref{axiomatization,thesis}. From \cref{decidability} we know that \SCI is
decidable, but the Hilbert-style deductive system gives no procedure to
determine whether a given formula is a tautology. From \cref{decidability} we
know there is a finite procedure to do that, but we are still missing a
procedure that could be used in practice.

Let us show some examples to illustrate these points:

\begin{example}
    \label{ex_pqqp}
    Let us show a full proof of a formula: $(p \id q) \ra (q \id p)$

    \begin{enumerate}
        \item $p \id p$ \hfill $(Ax1)$
        \item $(p \id q) \ra ((p \id p) \ra ((p \id p) \id (q \id p)))$ \hfill $(Ax5)$
        \item $((p \id p) \id (q \id p)) \ra ((p \id p) \ra (q \id p))$ \hfill $(Ax2)$
        \item $(p \id p) \ra (((p \id q) \ra ((p \id p) \ra ((p \id p) \id (q \id p)))) \ra ((((p \id p) \id (q \id p)) \ra ((p \id p) \ra (q \id p))) \ra ((p \id q) \ra (q \id p))))$
              \begin{flushright}
                  \PC tautology $\varphi \ra ((\psi \ra (\varphi \ra \vartheta)) \ra ((\vartheta \ra (\varphi \ra \chi)) \ra (\psi \ra \chi)))$
                  \\
                  with $\varphi = p \id p$\\$\psi = p \id q$\\$\vartheta = q \id p$\\$\chi = (p \id p) \id (q \id p)$.
              \end{flushright}
        \item $((p \id q) \ra ((p \id p) \ra ((p \id p) \id (q \id p)))) \ra ((((p \id p) \id (q \id p)) \ra ((p \id p) \ra (q \id p))) \ra ((p \id q) \ra (q \id p)))$ \hfill $\MP(1, 4)$
        \item $(((p \id p) \id (q \id p)) \ra ((p \id p) \ra (q \id p))) \ra ((p \id q) \ra (q \id p))$ \hfill $\MP(2, 5)$
        \item $(p \id q) \ra (q \id p)$ \hfill $\MP(3, 6)$
    \end{enumerate}

\end{example}
%
As can be seen, although the finished proof isn't very long, it would be very
difficult to come up with the precise axioms to use.

\begin{example}
    Let us take a formula $p \id q$. We could be deducing many theses from our axioms, but at no point will we deduce it, nor $p \not \id q$, because those formulas aren't tautologies. But we cannot arrive at this conclusion using just our Hilbert-style system.
\end{example}

\begin{example}
    \label{ex_pqr}
    Let us show a full proof of a formula $(q \id r) \ra ((p \id q) \ra (p \id r))$.

    \begin{enumerate}
        \item $(((p \id q) \id (p \id r)) \ra ((p \id q) \ra (p \id r))) \ra ((q \id r) \ra (((p \id q) \id (p \id r)) \ra ((p \id q) \ra (p \id r)))) $
              \begin{flushright} \PC tautology $\varphi \ra (\psi \ra \varphi)$ \\
                  with $\varphi = ((p \id q) \id (p \id r)) \ra ((p \id q) \ra (p \id r))$\\
                  $\psi = q \id r$
              \end{flushright}
        \item $((p \id q) \id (p \id r)) \ra ((p \id q) \ra (p \id r))  $ \hfill $(Ax2)$
        \item $(q \id r) \ra (((p \id q) \id (p \id r)) \ra ((p \id q) \ra (p \id r)))$ \hfill $\MP(2, 1)$
        \item $((q \id r) \ra (((p \id q) \id (p \id r)) \ra ((p \id q) \ra (p \id r)))) \ra (((q \id r) \ra ((p \id q) \id (p \id r))) \ra ((q \id r) \ra ((p \id q) \ra (p \id r)))) $ \begin{flushright}
                  \PC tautology $(\varphi \ra (\psi \ra \vartheta)) \ra ((\varphi \ra \psi) \ra (\varphi \ra \vartheta))$ \\
                  with $\varphi = q \id r$ \\
                  $\psi = (p \id q) \id (p \id r)$ \\
                  $\vartheta = (p \id q) \ra (p \id r)$
              \end{flushright}
        \item $((q \id r) \ra ((p \id q) \id (p \id r))) \ra ((q \id r) \ra ((p \id q) \ra (p \id r))) $ \hfill $\MP(3, 4)$
        \item $p \id p $ \hfill $(Ax1)$
        \item $(p \id p) \ra ((q \id r) \ra ((p \id q) \id (p \id r)))$ \hfill $(Ax5)$
        \item $(q \id r) \ra ((p \id q) \id (p \id r))$ \hfill $\MP(6, 7)$
        \item $(q \id r) \ra ((p \id q) \ra (p \id r))$ \hfill $\MP(8, 5)$
    \end{enumerate}
\end{example}

In 1974 Michaels presented a differet proof system for \SCI, in the style of
Gentzen's sequent calculus \cite{michaels}. It was refined by Wasilewska and
presented in 1976 as a decision procedure \cite{wasilewska}. Although the
procedure presented there ws proved to terminate for every input formula, it
was too complicated and, if implemented, would have too big time comlexity to
be practical. In 2018 Chlebowski further modified and discussed the sequent
calculus system, but his result was not a decision procedure.

In 2007 Golińska-Pilarek presented a proof system in the style of
Rasiowa-Sikorski dual tableau \cite{jgp_2007} it was expanded and refined in
\cite{jgp_book} and \cite{jgp_2019}, but it was not yet a terminating decision
procedure.

An important difference between both the above proof systems and the Hilbert
style system showed before is that the former start with the formula we want to
prove or disprove and at each step offer a finite amount of possible rules to
apply. Even though they were not a decision procedures, they could be helpful
when manually proving some formulas. Finally, they were important steps at
arriving at the full decision procedure of \SCI.

The a full decision procedure \TSCI was presented in 2021 by Golińska-Pilarek,
Huuskonen and Zawidzki \cite{jgp_t_procedure}. Also in 2021 the dual tableau
system mentioned above was modified by the same authors to become a terminating
decision procedure \DTSCI \cite{jgp_dt_procedure}.

Let us now take a brief look at both \TSCI and \DTSCI, starting with the latter
as it is easier to present.

\subsection{\DTSCI}

TODO

\subsection{\TSCI}

\leqnomode
\begin{figure}[h]
    \begin{subfigure}{\textwidth}
        \centering
        \begin{subfigure}{0.3\textwidth}
            \begin{equation}
                \tag{$\lnot^+$}
                \frac{
                    w^+: \lnot \varphi}%
                { v^-: \varphi }
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.3\textwidth}
            \begin{equation}
                \tag{$\lnot^-$}
                \frac{
                    w^-: \lnot \varphi}%
                { v^+: \varphi }
            \end{equation}
        \end{subfigure}
    \end{subfigure}
    \begin{subfigure}{\textwidth}
        \centering
        \begin{subfigure}{0.5\textwidth}
            \begin{equation}
                \tag{$\ra^+$}
                \frac{
                    w^+: \varphi \ra \psi }%
                {\begin{split}
                        v^-: \varphi \\
                        u^-: \psi
                    \end{split}
                    \ \vline\
                    \begin{split}
                        v^-: \varphi \\
                        u^+: \psi
                    \end{split}
                    \ \vline\
                    \begin{split}
                        v^+: \varphi \\
                        u^+: \psi
                    \end{split}
                }
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.4\textwidth}
            \begin{equation}
                \tag{$\ra^-$}
                \frac{
                    w^-: \varphi \ra \psi}%
                {\begin{split}
                        v^+: \varphi \\
                        u^-: \psi
                    \end{split} }
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.4\textwidth}
            \begin{equation}
                \tag{$\id^+$}
                \frac{
                    w^+: \varphi \id \psi }%
                { \begin{split}
                        v^+: \varphi \\
                        u^+: \psi \\
                        v^+= u^+
                    \end{split}
                    \ \vline\
                    \begin{split}
                        v^-: \varphi \\
                        u^-: \psi \\
                        v^-= u^-
                    \end{split}
                }
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.5\textwidth}
            \begin{equation}
                \tag{$\id^-$}
                \frac{
                    w^-: \varphi \id \psi }%
                { \begin{split}
                        v^+: \varphi \\
                        u^+: \psi \\
                        v^+ \not= u^+
                    \end{split}
                    \ \vline\
                    \begin{split}
                        v^+: \varphi \\
                        u^-: \psi
                    \end{split}
                    \ \vline\
                    \begin{split}
                        v^-: \varphi \\
                        u^+: \psi
                    \end{split}
                    \ \vline\
                    \begin{split}
                        v^-: \varphi \\
                        u^-: \psi \\
                        v^-\not= u^-
                    \end{split}
                }
            \end{equation}
        \end{subfigure}
    \end{subfigure}
    \begin{subfigure}{\textwidth}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{$\id^\lnot$}
                \frac{
                    \begin{split}
                        \varphi \approx \psi \\
                        u: \lnot \varphi \\
                        y: \lnot \psi
                    \end{split}
                }%
                {u = y}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{$\id^\ra$}
                \frac{
                    \begin{split}
                        \varphi \approx \psi \\
                        \chi \approx \vartheta \\
                        x: \varphi \ra \chi \\
                        z: \psi \ra \vartheta
                    \end{split}
                }%
                {x = z}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{$\id^\id$}
                \frac{
                    \begin{split}
                        \varphi \approx \psi \\
                        \chi \approx \vartheta \\
                        x: \varphi \id \chi \\
                        z: \psi \id \vartheta
                    \end{split}
                }%
                {x = z}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{\texttt{F}}
                \frac{
                    \begin{split}
                        w: \varphi \\
                        v: \varphi
                    \end{split}
                }%
                {w = v}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{\texttt{sym}}
                \frac{
                    w=v
                }%
                {v = w}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{\texttt{tran}}
                \frac{
                    \begin{split}
                        w=v\\
                        v=u
                    \end{split}
                }%
                {w = u}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{$\bot_1$}
                \frac{
                    \begin{split}
                        w=v\\
                        w \not = v
                    \end{split}
                }%
                {\bot}
            \end{equation}
        \end{subfigure}
        \begin{subfigure}{0.24\textwidth}
            \begin{equation}
                \tag{$\bot_2$}
                \frac{
                    w^+ = v^-
                }%
                {\bot}
            \end{equation}
        \end{subfigure}
    \end{subfigure}
    \caption{Deduction rules of the \TSCI system.}
    \label{fig:rules1}
\end{figure}

\section{\TsSCI}

\begin{thebibliography}{9}
    \bibitem{suszko_bloom}
    Stephen L. Bloom, Roman Suszko (1972) \emph{Investigations into the Sentential Calculus with Identity}, Notre Dame Journal of Formal Logic, vol. XIII, no 3. \url{https://doi.org/10.1305/ndjfl/1093890617}

    \bibitem{michaels}
    Aileen Michaels (1974) \emph{A uniform proof procedure for SCI tautologies}. Studia Logica 33, 299--310. \url{https://doi.org/10.1007/BF02123284}

    \bibitem{wasilewska}
    Anita Wasilewska (1976) \emph{A sequence formalization for SCI}. Studia Logica 35 (3):213--217. \url{https://doi.org/10.1007/bf02282483}

    \bibitem{chlebowski}
    Szymon Chlebowski (2018) \emph{Sequent Calculi for \SCI}. Stud Logica 106, 541--563, \url{https://doi.org/10.1007/s11225-017-9754-8}

    \bibitem{jgp_2007}
    Joanna Golinska-Pilarek (2007) \emph{Rasiowa-Sikorski proof system for the non-Fregean sentential logic \SCI}. Journal of Applied Non-Classical Logics 17 (4):509--517. \url{https://doi.org/10.3166/jancl.17.511-519}

    \bibitem{jgp_book}
    Ewa Orłowska, Joanna Golińska-Pilarek (2011) \emph{Dual Tableaux: Foundations, Methodology, Case Studies}, Springer, Series: Trends in Logic, Vol. 33. \url{https://doi.org/10.1007/s11225-013-9467-6}

    \bibitem{jgp_2019}
    Joanna Golińska-Pilarek, Magdalena Welle (2019) \emph{Deduction in Non-Fregean Propositional Logic \SCI}. Axioms. 2019; 8(4):115. \url{https://doi.org/10.3390/axioms8040115}

    \bibitem{jgp_t_procedure}
    Joanna Golińska-Pilarek, Taneli Huuskonen, Michal Zawidzki (2021) \emph{Tableau-based decision procedure for non-Fregean logic of sentential identity}, Automated Deduction -- CADE 28. \url{https://doi.org/10.1007/978-3-030-79876-5_3}

    \bibitem{jgp_dt_procedure}
    {
        \color{red}
        TODO Joanna Golińska-Pilarek, Taneli Huuskonen, Michal Zawidzki (TODO: year?) \emph{Deciding Non-Fregean Identities: Tableaux vs. Dual Tableaux}.
    }

\end{thebibliography}

% ------------------------------------------------------------------

% \begin{definition}[Complexity of a set of formulas]
%     Given a set of formulas $\Phi$, let us define:
%     $$
%         c(\Phi) = \sum_{\phi \in \Phi} 3^{s(\phi)}
%     $$
% \end{definition}

% Let us assume that we are given a full ordering of formulas $\prec$, such that:
% \begin{itemize}
%     \item if $\varphi \not = \psi$, then $\varphi \prec \psi$ or $\psi \prec \varphi$,
%     \item if $s(\varphi) < s(\psi)$, then $\varphi \prec \psi$,
%     \item if $\varphi \prec \psi$, then $\varphi \id \psi \prec \psi \id \varphi$.
% \end{itemize}

% \section{Satisfiability in \SCI}
% \subsection{\SCI is decidable}
% \subsection{Decision procedures}
% \subsubsection{$T$ decision procedure}
% \subsubsection{$\Ts$ decision procedure}

% \leqnomode
% \begin{figure}
%     \begin{subfigure}{\textwidth}
%         \centering
%         \begin{subfigure}{0.3\textwidth}
%             \begin{equation}
%                 \tag{$\lnot$}
%                 \frac{
%                     \Phi \cup \{ \lnot \lnot \varphi \}}%
%                 { \Phi \cup \{\varphi\} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.3\textwidth}
%             \begin{equation}
%                 \tag{$\rightarrow$}
%                 \frac{
%                     \Phi \cup \{ \varphi \rightarrow \psi \}}%
%                 { \Phi \cup \{ \lnot \varphi \} | \Phi \cup \{ \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.3\textwidth}
%             \begin{equation}
%                 \tag{$\lnot \rightarrow$}
%                 \frac{
%                     \Phi \cup \{\lnot ( \varphi \rightarrow \psi ) \}}%
%                 { \Phi \cup \{ \varphi, \lnot \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \caption{Decomposition rules}
%     \end{subfigure}
%     \begin{subfigure}{\textwidth}
%         \centering
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\texttt{sym}_1^1$}
%                 \frac{
%                     \Phi \cup \{ \varphi \equiv \psi \} }%
%                 { \Phi \cup \{\psi \equiv \varphi\} }
%                 \text{ if $\varphi$ > $\psi$}
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\texttt{sym}_2^1$}
%                 \frac{
%                     \Phi \cup \{ \varphi \not \equiv \psi \}}%
%                 { \Phi \cup \{\psi \not \equiv \varphi\} }
%                 \text{ if $\varphi$ > $\psi$}
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.5\textwidth}
%             \begin{equation}
%                 \tag{$\texttt{fun}^1$}
%                 \frac{
%                     \Phi \cup \Phi(\varphi) \cup \{ p \equiv \varphi \} }%
%                 { \Phi \cup \Phi(\varphi / p) \cup \{p \equiv \varphi\} }
%                 \text{ if $p$ < $\varphi$}
%             \end{equation}
%         \end{subfigure}
%         \caption{Reduction rules}
%     \end{subfigure}
%     \begin{subfigure}{\textwidth}
%         \centering
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\not \equiv_1$}
%                 \frac{
%                     \Phi \cup \{ p \not \equiv \psi \} }%
%                 { \Phi \cup \{ p \not \equiv \alpha, \alpha \equiv \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\not \id_2$}
%                 \frac{
%                     \Phi \cup \{ \varphi \not \id \psi \} }%
%                 { \Phi \cup \{ \alpha \id \varphi, \beta \id \psi, \alpha \not \id \beta \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\id_\lnot$}
%                 \frac{
%                     \Phi \cup \{ p \id \lnot \psi  \} }%
%                 { \Phi \cup \{ p \id \lnot \alpha, \alpha \id \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.5\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\ra $}
%                 \frac{
%                     \Phi \cup \{ p \id (\varphi \ra \psi) \} }%
%                 { \Phi \cup \{ p \id (\alpha \ra \beta), \alpha \id \varphi, \beta \id \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\ra^l $}
%                 \frac{
%                     \Phi \cup \{ p \id (q \ra \psi) \} }%
%                 { \Phi \cup \{ p \id (q \ra \alpha), \alpha \id \psi  \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\ra^r $}
%                 \frac{
%                     \Phi \cup \{ p \id (\varphi \ra q) \} }%
%                 { \Phi \cup \{ p \id (\alpha \ra q), \alpha \id \varphi  \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\id^l $}
%                 \frac{
%                     \Phi \cup \{ p \id (q \id \psi) \} }%
%                 { \Phi \cup \{ p \id (q \id \alpha), \alpha \id \psi  \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\id^r$}
%                 \frac{
%                     \Phi \cup \{ p \id (\varphi \id q) \} }%
%                 { \Phi \cup \{ p \id (\alpha \id q), \alpha \id \varphi \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.45\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\id $}
%                 \frac{
%                     \Phi \cup \{ p \id (\varphi \id \psi) \} }%
%                 { \Phi \cup \{ p \id (\alpha \id \beta), \alpha \id \varphi, \beta \id \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$ \id$}
%                 \frac{
%                     \Phi \cup \{ \varphi \id \psi \} }%
%                 { \Phi \cup \{ \alpha \id \beta, \alpha \id \varphi, \beta \id \psi \} }
%             \end{equation}
%         \end{subfigure}
%         \caption{Identity rules. Note: in all identity rules the highlighted formula is not simple (i.e. $\varphi$ and $\psi$ are not variables)}
%     \end{subfigure}
%     \caption{Deduction rules of the first phase of $\Ts$.}
%     \label{fig:rules1}
% \end{figure}

% \begin{figure}
%     \begin{subfigure}{\textwidth}
%         \centering
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\texttt{sym}_1^2$}
%                 \frac{
%                     \Phi \cup \{ \varphi \equiv \psi \} }%
%                 { \Phi \cup \{\psi \equiv \varphi, \varphi \id \psi \} }
%                 \text{ if $\varphi$ > $\psi$}
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.4\textwidth}
%             \begin{equation}
%                 \tag{$\texttt{sym}_2^2$}
%                 \frac{
%                     \Phi \cup \{ \varphi \not \equiv \psi \}}%
%                 { \Phi \cup \{\psi \not \equiv \varphi, \varphi \not \id \psi\} }
%                 \text{ if $\varphi$ > $\psi$}
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.55\textwidth}
%             \begin{equation}
%                 \tag{$\texttt{fun}^2$}
%                 \frac{
%                     \Phi \cup \Phi(\varphi) \cup \{ p \equiv \varphi \} }%
%                 { \Phi \cup \Phi(\varphi / p) \cup \Phi(\varphi) \cup \{p \equiv \varphi\} }
%                 \text{ if $p$ < $\varphi$}
%             \end{equation}
%         \end{subfigure}
%     \end{subfigure}
%     \begin{subfigure}{\textwidth}
%         \begin{subfigure}{0.48\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\top $}
%                 \frac{
%                     \Phi \cup \{ p \id q \} }%
%                 { \Phi \cup \{ p, q, p\id q \} | \Phi \cup \{ \lnot p, \lnot q, p\id q \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{subfigure}{0.48\textwidth}
%             \begin{equation}
%                 \tag{$ \id_\top^\lnot $}
%                 \frac{
%                     \Phi \cup \{ p \id \lnot q \} }%
%                 { \Phi \cup \{ p, \lnot q, p \id \lnot q \} | \Phi \cup \{ \lnot p, q, p\id \lnot q \} }
%             \end{equation}
%         \end{subfigure}
%         \begin{equation}
%             \tag{$ \id_\top^\ra $}
%             \frac{
%                 \Phi \cup \{ p \id (q \ra r) \} }%
%             { \Phi \cup \{ p, \lnot q, \theta \} | \Phi \cup \{ p, r, \theta \} | \Phi \cup \{ \lnot p, q, \lnot r, \theta \}}
%             \text{, where } \theta = (p \id (q \ra r))
%         \end{equation}
%         \begin{equation}
%             \tag{$ \id_\top^\id $}
%             \frac{
%                 \Phi \cup \{ p \id (q \id r) \} }%
%             { \Phi \cup \Phi_1 |
%                 \Phi \cup \Phi_2 |
%                 \Phi \cup \Phi_3 |
%                 \Phi \cup \Phi_4 |
%                 \Phi \cup \Phi_5 |
%                 \Phi \cup \Phi_6
%             }
%             \text{, where }
%         \end{equation}
%         \[
%             \begin{aligned}
%                 \Phi_1 & = \{p, q, r, q \id r, p \id (q \id r) \}                       \\
%                 \Phi_2 & = \{p, \lnot q, \lnot r, q \id r, p \id (q \id r) \}           \\
%                 \Phi_3 & = \{\lnot p, q, r, q \not \id r, p \id (q \id r) \}            \\
%                 \Phi_4 & = \{\lnot p, q, \lnot r, q \not \id r, p \id (q \id r) \}      \\
%                 \Phi_5 & = \{\lnot p,\lnot q, r, q \not \id r, p \id (q \id r) \}       \\
%                 \Phi_6 & = \{\lnot p, \lnot q,\lnot r, q \not \id r, p \id (q \id r) \} \\
%             \end{aligned}
%         \]
%         \begin{equation}
%             \tag{$\id_\bot$}
%             \frac{
%                 \Phi \cup \{ p \not \id q \} }%
%             { \Phi \cup \{p,q,\theta\} |
%                 \Phi \cup \{p,\lnot q,\theta\} |
%                 \Phi \cup \{\lnot p,q,\theta\} |
%                 \Phi \cup \{\lnot p,\lnot q,\theta\}
%             }
%             \text{, where } \theta = (p \not \id q)
%         \end{equation}
%     \end{subfigure}
%     \caption{Deduction rules of the second phase of $\Ts$.}
%     \label{fig:rules2}
% \end{figure}

% The $\Ts$ decision procedure has two main groups of deduction rules, see figures \ref{fig:rules1} and \ref{fig:rules2}.

% The rules are

% TODO: differences compared to \enquote{Dedukcyjne Dylematy} (DD):
% \begin{itemize}
%     \item Phase 1 rules replace formulas, phase 2 rules only add formulas.
%     \item No need to say: \enquote{w wyniku zastosowania reguły co najmniej jedna z konkluzji zawiera formułę, która nie występuje w $X \cup \{\varphi\}$}. In the first phase simply apply all the rules as long as you can. In second phase apply closure rules only once to any given formula.
%     \item There are TWO $fun$ rules: one for each phase. Phase 1 fun rule replaces formulas, phase 2 fun rule only adds formulas (leaves the original unchaged as well). If $fun$ is replacing in phase 2 then e.g. after rule $\equiv_T^\lnot$ the rule $fun$ is applied removing one of the conclusion formulas. Besides, the examples in DD seem to assume the $fun$ works this way anyways.
% \end{itemize}

% \subsubsection{Correctness and completeness of $\Ts$}
% \begin{theorem}
%     $\Ts$ is correct.
% \end{theorem}

% \begin{proof}
%     TODO: this is just a sketch, rewrite. We want to show that if $\Ts$ says the formula is closed, it is indeed closed.
%     \begin{enumerate}
%         \item All the rules of $\Ts$ are strongly correct. TODO at least the non-obvious ones.
%         \item We're given a closed tree.
%         \item Going up the tree, on every step we have a closed set of formulas, because every rule is strongly correct.
%         \item The root is closed.
%     \end{enumerate}
% \end{proof}

% \begin{theorem}
%     $\Ts$ is complete.
% \end{theorem}

% We want to show, that if the formula is closed, the tree produced by $\Ts$ is closed, or by contraposition, that if the tree produced by $\Ts$ is open, the given formula is open.

% First, let us show that the first phase finishes.

% \begin{theorem}
%     The first phase of $\Ts$ finishes and produces finite trees.
% \end{theorem}
% \begin{proof}
%     Let us first notice that all decomposition and identity rules of the first phase reduce the complexity of the formulas.

%     \begin{lemma}
%         \label{l:c}
%         If rule $R$ is a decomposition rule or an identity rule, $\Phi$ is its premise and $\Phi_1, ... \Phi_n$ are its conclusions, then $c(\Phi) > c(\Phi_i)$, for $1 \leq i \leq n$.
%     \end{lemma}
%     \begin{proof}
%         TODO: Przerachować. Chyba zdaje się działać, ewentualnie trochę podkręcić $s$ lub $c$.
%     \end{proof}
%     \begin{lemma}
%         \label{l:c2}
%         If rule $R$ is a reduction rule $\Phi$ is its premise and $\Phi_1$ is its conclusion, then $c(\Phi) \geq c(\Phi_1)$.
%     \end{lemma}
%     \begin{proof}
%         Trivial. All the reduction rule replace a formula with another formula that is smaller in our given order $\prec$, so they will never increase the complexity function.
%     \end{proof}
%     \begin{lemma}
%         \label{l:c3}
%         The reduction rules cannot be applied indefinitely without lowering the complexity function.
%     \end{lemma}
%     \begin{proof}
%         TODO: przepisać. To jest trywialne.

%         Based on lemma \cref{l:c2}, applying the reduction rule will never increase the complexity function. If applying the rule will give conclusions with the same complexity, the conclusion will contain some formulas that are lower in $\prec$ than the appropriate formulas in the premise, while all the other formulas are equal.
%     \end{proof}

%     As a consequence of lemmas \ref{l:c}, \ref{l:c2} and \ref{l:c3} it is clear that, for each node of the produced tree, after a finite number of rules applied, either a closed node or a node with lower complexity will be reached. Since the complexity of the node is always positive and finite it is impossible that the complexity will be lowered indefinitely, so the first phase of the $\Ts$ procedure will finish.

% \end{proof}

% \begin{theorem}
%     All leaves produced by the first phase are either closed or contain only simple formulas.
% \end{theorem}
% \begin{proof}
%     Simple. Assume there is a non-simple formula in an open leaf. One of decomposition, reduction or equality rules would apply to it, which is a contradiction with the fact that the first phase finished.
% \end{proof}

% \begin{theorem}
%     Given a set of simple formulas, phase 2 finishes.
% \end{theorem}
% \begin{proof}
%     TODO: trywialne. Wszystkie formuły z $\id$ w nazwie wykonają się co najwyżej raz, po każdej z nich $\texttt{sym}*$ i $\texttt{fun}$ też co najwyżej raz.
% \end{proof}

% Let us call a tree that is produced by the $\Ts$ procedure a $\Ts$ tree.

% \begin{theorem}
%     Open leaf $X$ of a $\Ts$ tree satisfies the following conditions:
%     \begin{itemize}
%         \item [(X1)] $X$ is a set of simple formulas.
%         \item [(X2)] If $\varphi \in \FOR^X$ then $\varphi$ is either a simple formula or is equal to $p \ra q$, for some variables $p, q$.
%         \item [(X3)] If $\varphi \id \psi \in \FOR^X$, then $\varphi \leq \psi$ or $\psi \id \varphi \in \FOR^X$.
%         \item [(X4)] If $\varphi \not \id \psi \in \FOR^X$, then $\varphi < \psi$ or $\psi \not \id \varphi \in \FOR^X$.
%         \item [(X5)] If $p \id q \in X$, then $p, q \in X$, or $\lnot p, \lnot q \in X$.
%         \item [(X6)] If $p \id \lnot q \in X$, then $p, \lnot q \in X$, or $\lnot p, q \in X$.
%         \item [(X7)] If $p \id (q \ra r) \in X$, then $p, \lnot q \in X$, or $p, r \in X$, or $\lnot p, q, \lnot r \in X$.
%         \item [(X8)] If $p \id (q \id r) \in X$, then $\Phi_i \subseteq X$, for $i \in \{1, ..., 6\}$, where $\Phi_i$ are defined in figure \ref{fig:rules2}.
%     \end{itemize}
% \end{theorem}
% \begin{proof}
%     (X1) Phase 1 ends with nodes containing only simple formulas. Phase 2 doesn't add any non-simple formulas.

%     (X2), ... (X8) Trivial, directly following phase 2 rules.
% \end{proof}

% \begin{lemma}[Lemat 5 z DD]
%     Let $X$ be an open leaf of a $\Ts$ tree and let $\lnot \varphi \in \FOR^X$. Then:
%     $$
%         \varphi \in X \cup \IDx \text{ iff } \lnot \varphi \not \in X \cup \IDx.
%     $$
% \end{lemma}
% \begin{proof}
%     Because of $X2$, if $\lnot \varphi \in \FORx$, then $\varphi = p$ or $\varphi = (p \id q)$ for some variables $p, q$.

%     \begin{itemize}
%         \item [1°] $\varphi = p$. ... (Jak w DD.)
%         \item [2°] $\varphi = (p \id q)$. \\
%               Since $\lnot \varphi = p \not \id q \in \FORx$, we have that $p \not \id q \in X$, because $p \not \id q$ cannot be a subformula of a simple formula. From $p \not \id q \in X$ it follows that $p \not = q$ and $p \id q \not \in X$, otherwise $X$ would be an axiom set and therefore closed.

%               So, we have: $p \not \id q \in X$ (so, $\lnot \varphi \in X \subseteq X \cup \IDx$). We need to show that $\varphi \not \in X \cup \IDx$, i.e. $p \id q \not \in X \cup \IDx$. We have that $p \id q \not \in X$, so all we need to show is that $p \id q \not \in \IDx$.

%               Let as assume otherwise, that $p \id q \in \IDx$.

%               Since $p \id q \not \in X$, we have that $p \id q \not \in \IDx_0$. $p \id q \not \in \IDx_n$ for $n > 0$ based on the definition of $\IDx_n$. So, for the $p \id q$ to be in $\IDx$ we need to have formulas $\theta_1, ..., \theta_k$, for some $k \geq 1$, such that: $p \id \theta_1 \in X$, or $\theta_1 \id p \in X$, ..., $\theta_k \id q$, or $q \id \theta_k$.
%               \begin{itemize}
%                   \item [2.1°] $k = 1$.\\
%                         TODO: przepisać żeby było jaśniej.\\
%                         We have that $p \id \theta_1 \in X$, or $\theta_1 \id p \in X$ and $\theta_1 \id q \in X$, or $q \id \theta_1 \in X$. One of the formulas in $\{p, q, \theta_1\}$ will be smallest in the ordering $\prec$. If the formula $p$ is the smallest, the $\texttt{fun}$ rule would produce $q \id p \in X$ (or $p \id q \in X$) from $q \id \theta_1 \in X$ (or $\theta_1 \id q \in X$) by replacing $\theta_1$ by $p$. In any case, $p \id q$ would be in $X$ (possibly after $\texttt{sym}^2_1$). Thus $X$ would be an axiom set ($p\not \id q, p \id q \in X$), a contradiction. A contradiction happens in a similar way if the formula $q$ is the smallest of the three. If the formula $\theta_1$ is the smallest one, from $p \not \id q \in X$ will be produced either $\theta_1 \not \id q \in X$ or $p \not \id \theta_1 \in X$ (by $\texttt{fun}$ similarly to above), giving another contradiction.
%                   \item [2.2°] $k > 1$.\\
%                         ???
%               \end{itemize}
%     \end{itemize}
% \end{proof}

% \section{Implementation}
% \subsection{Data structures}
% \subsection{Optimizations}
% % \section{Comparison of $T$ and $T*$ systems}
% \subsection{Size of produced proof trees}
% \subsection{Time complexity}
% \subsection{Real time}

\end{document}